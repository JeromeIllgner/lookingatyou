(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,n){e.exports=n.p+"static/media/eye.66158892.png"},145:function(e,t,n){},241:function(e,t,n){e.exports=n(523)},251:function(e,t,n){},256:function(e,t){},258:function(e,t){},290:function(e,t){},291:function(e,t){},333:function(e,t){},352:function(e,t,n){},353:function(e,t,n){},515:function(e,t,n){},516:function(e,t,n){},517:function(e,t,n){},518:function(e,t,n){},519:function(e,t,n){},523:function(e,t,n){"use strict";n.r(t);var a,i,o=n(0),r=n.n(o),c=n(14),l=n.n(c),u=n(23),s=n(29),f=n.n(s),p=n(45),h=n(50),d=n(51),m=n(56),E=n(52),g=n(26),v=n(55),O=(n(251),n(554)),b=n(101),y=n.n(b);!function(e){e.RIGHT="RIGHT",e.LEFT="LEFT"}(a||(a={})),function(e){e.LEFT_WAVE="LEFT_WAVE",e.RIGHT_WAVE="RIGHT_WAVE",e.HANDS_UP="HANDS_UP",e.ARMS_OUT="ARMS_OUT",e.DAB="DAB",e.HANDS_HIPS="HANDS_HIPS"}(i||(i={}));var S={OPEN:.45,CLOSED:0,SQUINT:.2,SHOCKED:.75},C={dilated:1.3,neutral:1,constricted:.8},T={blink:100,peek:1e3},w=18e3,I="green",N="red",x={moveCenterChance:.1,moveSideChance:.5,xDelta:.4,sideBuffer:.2},M={maxBrightness:220,dilationMultipler:1.2,dilationOffset:.7},A={frequency:.25,focusedFrequency:.0625,peekFrequency:.0475,movementThreshold:.8},D={canvasScale:1,lineWidth:4,minConfidence:.1,pointRadius:3},j={yOffset:10,xOffset:10},R={RIGHT_SHOULDER:"rightShoulder",LEFT_SHOULDER:"leftShoulder",RIGHT_HIP:"rightHip"},P={intensity:.6},k={minInterval:4e3,maxInterval:7e3,maxNum:8},L={sclera:.9,iris:.4,pupil:.16},H=1e3,W="17.5em",_="calc(-17.5em - 10px)",V=.2,U=.8,F={x:0,y:0},G=5e3,Y=n(21),B=n(24);function q(e){var t=Object(B.a)(e,4),n=t[0],a=t[1];return{x:n+t[2]/2,y:a+t[3]/2}}function X(e,t,n){var a=q(e);return{x:K(a.x,t),y:K(a.y,n)}}function K(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;return(e-n)/(t-n)*(a-i)+i}var z,Q=n(7),J={openCoefficient:S.OPEN,duration:500},Z=function(){var e;return[{openCoefficient:(e={},Object(Q.a)(e,a.LEFT,S.CLOSED),Object(Q.a)(e,a.RIGHT,S.OPEN),e),duration:500},J]},$=function(){var e;return[{openCoefficient:(e={},Object(Q.a)(e,a.RIGHT,S.CLOSED),Object(Q.a)(e,a.LEFT,S.OPEN),e),duration:500},J]},ee={dilation:C.constricted,openCoefficient:S.SHOCKED,duration:100},te={dilation:C.dilated,openCoefficient:S.SQUINT,duration:100},ne=function(){return[{dilation:C.dilated,openCoefficient:S.SQUINT,duration:500},ee,te,ee,te]};function ae(){for(var e=[],t=0;t<=16;t++){var n=2*Math.PI/16*t,a=.3*Math.sin(n),i=.3*Math.cos(n);e.push({target:{x:i,y:a},duration:100})}return e}function ie(){for(var e=[],t=0;t<20;t++)e.push({target:{x:K(Math.random(),1),y:K(Math.random(),1)},irisColor:"#"+((1<<24)*Math.random()|0).toString(16),duration:150,openCoefficient:S.OPEN+S.OPEN*t/20});return e}var oe,re=(z={},Object(Q.a)(z,i.LEFT_WAVE,$),Object(Q.a)(z,i.RIGHT_WAVE,Z),Object(Q.a)(z,i.HANDS_UP,ae),Object(Q.a)(z,i.ARMS_OUT,ne),Object(Q.a)(z,i.DAB,ie),Object(Q.a)(z,i.HANDS_HIPS,function(){return[{openCoefficient:S.SQUINT,target:{x:0,y:0},duration:1e3},{openCoefficient:S.SQUINT,target:{x:0,y:0},duration:2e3},{openCoefficient:S.OPEN,target:{x:0,y:0},duration:500}]}),z),ce={t:ne,d:ie,l:Z,r:$,u:ae},le=n(13);function ue(e){return e.map(function(e){var t=e.keypoints,n=Object(Y.b)([t[Y.d.leftEye],t[Y.d.rightEye]]);return{bbox:[n.minX,n.minY,n.maxX-n.minX,n.maxY-n.minY],info:e}})}function se(e,t){if(e){var n=t.createElement("canvas");n.height=e.height,n.width=e.width;var a=n.getContext("2d");if(a)return a.drawImage(e,0,0,n.width,n.height),a.getImageData(0,0,n.width,n.height)}return null}function fe(e,t,n,a,i){var o=180*function(e,t,n){var a=Math.hypot(e.position.x-t.position.x,e.position.y-t.position.y),i=Math.hypot(t.position.x-n.position.x,t.position.y-n.position.y),o=Math.hypot(n.position.x-e.position.x,n.position.y-e.position.y);return Math.acos((Math.pow(a,2)+Math.pow(i,2)-Math.pow(o,2))/(2*a*i))}(e,t,n)/Math.PI;return o>=a&&o<=i}var pe=(oe={},Object(Q.a)(oe,i.DAB,function(e){var t=function(e){if(!ve(e.leftWrist,e.leftEye,e.rightWrist,e.leftShoulder,e.leftElbow))return!1;var t=fe(e.leftShoulder,e.leftElbow,e.leftWrist,150,180),n=fe(e.rightShoulder,e.rightElbow,e.rightWrist,30,70),a=e.leftWrist.position.x>e.leftElbow.position.x&&e.leftElbow.position.x>e.leftShoulder.position.x&&Ee(e.leftWrist,e.leftElbow,e.leftShoulder);return t&&n&&a}(e),n=function(e){if(!ve(e.leftWrist,e.rightEye,e.rightWrist,e.rightElbow,e.rightShoulder))return!1;var t=fe(e.rightShoulder,e.rightElbow,e.rightWrist,150,180),n=fe(e.leftShoulder,e.leftElbow,e.leftWrist,30,70),a=e.rightWrist.position.x<e.rightElbow.position.x&&e.rightElbow.position.x<e.rightShoulder.position.x&&Ee(e.rightWrist,e.rightElbow,e.rightShoulder);return t&&n&&a}(e);return t||n}),Object(Q.a)(oe,i.HANDS_UP,function(e){var t=ve(e.leftEye,e.leftWrist,e.leftElbow,e.leftShoulder,e.rightEye,e.rightWrist,e.rightElbow,e.rightShoulder),n=e.rightWrist.position.y<e.rightEye.position.y&&e.leftWrist.position.y<e.leftEye.position.y,a=Ee(e.leftWrist,e.leftElbow,e.leftShoulder)&&Ee(e.rightWrist,e.rightElbow,e.rightShoulder);return t&&n&&a}),Object(Q.a)(oe,i.ARMS_OUT,function(e){if(!ve(e.leftElbow,e.leftShoulder,e.leftWrist,e.rightWrist,e.rightElbow,e.rightShoulder))return!1;var t=e.leftWrist.position.x>e.leftElbow.position.x&&e.leftElbow.position.x>e.leftShoulder.position.x,n=me(e.leftWrist,e.leftShoulder),a=fe(e.leftShoulder,e.leftElbow,e.leftWrist,150,180),i=e.rightWrist.position.x<e.rightElbow.position.x&&e.rightElbow.position.x<e.rightShoulder.position.x,o=me(e.rightWrist,e.rightShoulder),r=fe(e.rightShoulder,e.rightElbow,e.rightWrist,150,180);return t&&i&&n&&o&&a&&r}),Object(Q.a)(oe,i.LEFT_WAVE,function(e){return e.leftElbow.position.x>e.leftShoulder.position.x&&de(e.leftWrist,e.leftElbow,e.rightWrist,e.rightElbow)}),Object(Q.a)(oe,i.RIGHT_WAVE,function(e){return e.rightElbow.position.x<e.rightShoulder.position.x&&de(e.rightWrist,e.rightElbow,e.leftWrist,e.leftElbow)}),Object(Q.a)(oe,i.HANDS_HIPS,function(e){var t=Object(le.a)({},e),n=t.leftWrist,a=t.leftElbow,i=t.leftShoulder,o=t.leftHip,r=t.rightWrist,c=t.rightElbow,l=t.rightShoulder,u=t.rightHip,s=fe(n,a,i,60,120),f=fe(a,i,o,20,70),p=fe(r,c,l,60,120),h=fe(c,l,u,20,70);return s&&f&&p&&h&&ge(n,a)&&ge(a,i)&&ge(r,c)&&ge(c,l)}),oe);function he(e){var t=function(e){var t=e.info.keypoints;return{leftEye:t[Y.d.leftEye],rightEye:t[Y.d.rightEye],leftShoulder:t[Y.d.leftShoulder],rightShoulder:t[Y.d.rightShoulder],leftElbow:t[Y.d.leftElbow],rightElbow:t[Y.d.rightElbow],leftWrist:t[Y.d.leftWrist],rightWrist:t[Y.d.rightWrist],leftHip:t[Y.d.leftHip],rightHip:t[Y.d.rightHip]}}(e);return Object.keys(pe).find(function(e){return pe[e](t)})}function de(e,t,n,a){var i=ve(e,t),o=ve(n,a),r=180*Math.atan2(t.position.y-e.position.y,e.position.x-t.position.x)/Math.PI,c=r>60&&r<120,l=e.position.y<t.position.y,u=n.position.y>a.position.y;return c&&i&&l&&(!o||u)}function me(e,t){return e.position.y<t.position.y+25&&e.position.y>t.position.y-25}function Ee(e,t,n){return e.position.y<t.position.y&&t.position.y<n.position.y}function ge(e,t){return e.position.y>t.position.y}function ve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return e.score<V})}function Oe(e){return Object(le.a)({},e.configStore)}function be(e){return e.configStore.appConfig}function ye(e){return e.configStore.advancedConfig}function Se(e){return e.configStore.appConfig.fps}function Ce(e){return e.configStore.appConfig.showHelp}var Te=n(109),we=n(84),Ie=n.n(we);function Ne(e,t,n){return e.filter(function(e){return!n||n(e)}).reduce(function(e,n){return void 0===e||t(n,e)>0?n:e},void 0)}function xe(e,t,n,a,i){for(var o=0,r=0,c=0,l=i.data,u=0,s=4*t*i.width;s<4*a*i.width;s+=4*i.width)for(var f=4*e;f<4*n;f+=4){var p=l[f+s],h=l[f+s+1],d=l[f+s+2],m=Ie.a.rgb.lab([p,h,d]),E=Object(B.a)(m,3);o+=E[0],r+=E[1],c+=E[2],u++}o/=u,r/=u,c/=u;var g=Ie.a.lab.rgb([o,r,c]),v=Object(B.a)(g,3);return{r:v[0],g:v[1],b:v[2]}}function Me(e){var t=e.find(function(e){return e.part===R.RIGHT_SHOULDER}),n=e.find(function(e){return e.part===R.LEFT_SHOULDER});return n&&t?Math.abs(Math.round((n.position.x+t.position.x)/2)-5):0}function Ae(e){var t=e.find(function(e){return e.part===R.RIGHT_SHOULDER});return t?Math.round(t.position.y)+j.yOffset:0}function De(e,t,n){return function(a,i){var o=X(a.bbox,t.width,t.height),r=X(i.bbox,t.width,t.height),c=Math.hypot(r.x-e.x,r.y-e.y),l=Math.hypot(o.x-e.x,o.y-e.y);return l>.2||c>.2?c-l:function(e,t,n,a){var i=Me(n),o=Me(a),r=i+j.xOffset,c=o+j.xOffset,l=Ae(n),u=Ae(a),s=l+j.yOffset,f=u+j.yOffset,p=xe(i,l,r,s,e),h=xe(o,u,c,f,e),d=Math.pow(p.g-t.g,2),m=Math.pow(p.b-t.b,2),E=Math.pow(p.r-t.r,2);return Math.pow(h.r-t.r,2)+Math.pow(h.g-t.g,2)+Math.pow(h.b-t.b,2)-(E+d+m)}(t,n,a.info.keypoints,i.info.keypoints)}}function je(e){if(1===e.length)return e[0];for(var t=[],n=0,a=[],i=0;i<e.length-1;i++)a.push(e[i+1]-e[i]);for(var o=a.length-1;o>=0;o--){var r=Math.pow(.5,a.length-o);t.push(a[o]*r),n+=r}return t.reduce(function(e,t){return e+t},0)/n+e[e.length-1]}function Re(e){e=e.reverse();for(var t=[],n=0,a=0;a<e.length;a++){var i=Math.pow(.5,a);t.push(e[a]*i),n+=i}return t.reduce(function(e,t){return e+t},0)/n}function Pe(e,t){return 0}function ke(e){if(e.videoStore.video)return e.videoStore.video.videoElement}function Le(e){return e.videoStore.webcamAvailable}function He(e){return e.videoStore.image}function We(e){return e.detectionStore.detections}var _e=Object(Te.a)([We,function(e){return e.detectionStore.history.map(function(e){return e.target})},function(e){return e.detectionStore.history.map(function(e){return e.color})},He],function(e,t,n,a){return t.length>0?Ne(e,De(function(e){var t=e.map(function(e){return e.x}),n=e.map(function(e){return e.y});return{x:je(t),y:je(n)}}(t),a,function(e){var t=e.map(function(e){return e.r}),n=e.map(function(e){return e.g}),a=e.map(function(e){return e.b});return{r:Re(t),g:Re(n),b:Re(a)}}(n))):Ne(e,Pe)}),Ve=Object(Te.a)([_e,function(e){var t=ke(e);if(t)return{width:t.width,height:t.height}}],function(e,t){return e&&t?X(e.bbox,t.width,t.height):F}),Ue=Object(Te.a)([_e,He],function(e,t){return e?function(e,t){if(!t)return{r:0,g:0,b:0};var n=Me(e),a=Ae(e);return xe(n,a,n+10,a+10,t)}(e.info.keypoints,t):{r:0,g:0,b:0}});function Fe(e){return e.detectionStore.animation}function Ge(e){return e.detectionStore.animation.length>0}function Ye(e){return function(t){return{payload:t,type:e}}}function Be(e){return function(){return{type:e}}}function qe(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(p.a)(f.a.mark(function e(t){var n,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getUserMedia({video:{width:320,height:240}});case 3:if(n=e.sent,!(a=n.getVideoTracks()[0].getSettings()).width||!a.height){e.next=7;break}return e.abrupt("return",{width:a.width,height:a.height,stream:n});case 7:e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",void 0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}var Ke;!function(e){e.VIDEO="SET_VIDEO",e.VIDEO_STREAM="SET_VIDEO_STREAM",e.TOGGLE_WEBCAM="TOGGLE_WEBCAM_AVAILABLE",e.IMAGE_DATA="SET_IMAGE_DATA"}(Ke||(Ke={}));var ze=Ye("SET_VIDEO"),Qe=Ye("SET_VIDEO_STREAM"),Je=Be("TOGGLE_WEBCAM_AVAILABLE"),Ze=Ye("SET_IMAGE_DATA"),$e="SET_INTERVAL";function et(e){return function(){var t=Object(p.a)(f.a.mark(function t(n,a){var i,o;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(ct(null)),i=Oe(a()),t.next=4,Object(Y.c)(i.advancedConfig.modelConfig);case 4:o=t.sent,n(ct(o)),n(tt(e));case 7:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}function tt(e){return function(t,n){var a=n();t(nt(document)),e.clearInterval(a.detectionStore.detectionInterval);var i=e.setInterval(function(){return t(nt(e.document))},1e3/Se(a));t({type:$e,payload:i})}}function nt(e){return function(){var t=Object(p.a)(f.a.mark(function t(n,a){var i,o,r,c,l,u,s,p,h;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=a(),o=ke(i),r=i.detectionStore.model,c=Oe(i).advancedConfig.detectionConfig,o&&r){t.next=6;break}return t.abrupt("return");case 6:if(l=se(o,e)){t.next=9;break}return t.abrupt("return");case 9:return n(Ze(l)),t.t0=ue,t.next=13,r.estimateMultiplePoses(l,c);case 13:t.t1=t.sent,u=(0,t.t0)(t.t1),n(at(u)),!(s=_e(a()))||Ge(a())||a().detectionStore.animationCoolDown||(p=he(s))&&(h=re[p],n(lt(h())),n(ut()),window.setTimeout(function(){n(ut())},G));case 18:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}function at(e){return function(t,n){var a=n(),i=(new Date).getTime();if(i<a.detectionStore.nextSelectionSwapTime)t(ot({detections:e,previousTarget:Ve(a),previousColor:Ue(a)}));else{var o=_e(a);o&&e.length>1&&function(e,t){var n=q(t.bbox),a=0,i=Number.MAX_SAFE_INTEGER;e.forEach(function(e,t){var o=q(e.bbox),r=Math.hypot(o.x-n.x,o.y-n.y);r<i&&(a=t,i=r)}),e.splice(a,1)}(e,o);var r=Math.floor(Math.random()*(e.length-1)),c=i+k.minInterval+(k.maxInterval-k.minInterval)*Math.random(),l=e.length>0?e[r]:void 0;t(rt({selection:l,nextSelectionSwapTime:c}))}}}var it,ot=Ye("SET_DETECTIONS"),rt=Ye("SWAP_SELECTION"),ct=Ye("SET_MODEL"),lt=(Ye("SET_OPEN"),Ye("SET_ANIMATION")),ut=Be("TOGGLE_ANIMATION_COOLDOWN");function st(e,t,n){return function(a){switch(a(ft(e,t)),e){case it.APP:t.hasOwnProperty("fps")&&a(tt(n));break;case it.MODEL:t.hasOwnProperty("architecture")&&a(ft(it.MODEL,{outputStride:"16",multiplier:"1"})),a(et(n))}}}function ft(e,t){return e!==it.MODEL?{type:e,payload:t}:{type:e,payload:pt(t)}}function pt(e){var t={};return e.architecture&&(t.architecture=e.architecture),e.outputStride&&(t.outputStride=parseInt(e.outputStride,10)),e.inputResolution&&(t.inputResolution=parseInt(e.inputResolution,10)),e.multiplier&&(t.multiplier=parseFloat(e.multiplier)),t}!function(e){e.APP="SET_APP_CONFIG",e.ADVANCED="SET_ADVANCED",e.MODEL="SET_MODEL_CONFIG",e.DETECTION="SET_DETECTION_CONFIG",e.RESET="RESET_CONFIG"}(it||(it={}));var ht,dt=n(227),mt=n.n(dt);!function(e){e.FPS="FPS",e.X_SENSITIVITY="X_SENSITIVITY",e.Y_SENSITIVITY="Y_SENSITIVITY",e.VIDEO_STREAM="VIDEO_STREAM",e.IRIS_COLOR="IRIS_COLOR",e.DEBUG="DEBUG",e.REFLECTION="REFLECTION",e.REFLECTION_OPACITY="REFLECTION_OPACITY",e.ARCHITECTURE="ARCHITECTURE",e.OUTPUT_STRIDE="OUTPUT_STRIDE",e.RESOLUTION="RESOLUTION",e.MULTIPLIER="MULTIPLIER",e.DETECTIONS="DETECTIONS",e.MIN_SCORE="MIN_SCORE",e.NMS_RADIUS="NMS_RADIUS"}(ht||(ht={}));var Et=[ht.FPS,ht.IRIS_COLOR,ht.Y_SENSITIVITY,ht.X_SENSITIVITY],gt={FPS:function(){return r.a.createElement(o.Fragment,null,"Configures how many frames are processed per second.")},X_SENSITIVITY:function(){return r.a.createElement(o.Fragment,null,"How sensitively the eyes move horizontally.")},Y_SENSITIVITY:function(){return r.a.createElement(o.Fragment,null,"How sensitively the eyes move vertically.")},VIDEO_STREAM:function(){return r.a.createElement(o.Fragment,null,"Displays current webcam feed, outlines the person that is currently being tracked.")},IRIS_COLOR:function(){return r.a.createElement(o.Fragment,null,"Customise eye colour.")},DEBUG:function(){return r.a.createElement(o.Fragment,null,"View the current camera feed, with tracked object highlighted.",r.a.createElement("br",null),"Useful for setting up your cameras and environment.")},REFLECTION:function(){return r.a.createElement(o.Fragment,null,"This checkbox allows you to view the currently selected target inside the pupil as a reflection.")},REFLECTION_OPACITY:function(){return r.a.createElement(o.Fragment,null,"Configure the opacity of the reflection. This does not affect performance.")},ARCHITECTURE:function(){return r.a.createElement(o.Fragment,null,"The model determines the speed and accuracy of the detection.",r.a.createElement("br",null),"MobilNetV1 is faster whereas Resnet50 is more accurate.")},OUTPUT_STRIDE:function(){return r.a.createElement(o.Fragment,null,"Output Stride determines the output resolution of the model detection.",r.a.createElement("br",null),"A higher output stride results in faster detection.")},RESOLUTION:function(){return r.a.createElement(o.Fragment,null,"The resolution determines the input resolution to the detection model.",r.a.createElement("br",null),"Lower resolutions run faster.")},MULTIPLIER:function(){return r.a.createElement(o.Fragment,null,"The multiplier determines the depth of the CNN.",r.a.createElement("br",null),"A lower value results in faster detections.")},DETECTIONS:function(){return r.a.createElement(o.Fragment,null,"This value sets the maximum number of detections")},MIN_SCORE:function(){return r.a.createElement(o.Fragment,null,"Sets the minimum certainty to commit to a prediction.")},NMS_RADIUS:function(){return r.a.createElement(o.Fragment,null,"This value adjusts the non-maximum-supression radius in pixels. This prevents multiple",r.a.createElement("br",null),"detections being made in within the specified number of pixels.")}};var vt=function(e){return r.a.createElement("div",{className:ht[e.problemWith]},r.a.createElement(mt.a,{id:ht[e.problemWith],place:"right",type:"dark",effect:"solid"},r.a.createElement("span",null,function(e){var t=gt[ht[e]];return r.a.createElement(t,null)}(e.problemWith))))};function Ot(e,t,n){!function(e,t,n){Object(Y.a)(e,D.minConfidence).forEach(function(e){!function(e,t,n,a,i){i.beginPath(),i.moveTo(e.x*a,e.y*a),i.lineTo(t.x*a,t.y*a),i.lineWidth=D.lineWidth,i.strokeStyle=n,i.stroke()}(e[0].position,e[1].position,n,D.canvasScale,t)})}(e,t,n),function(e,t,n){var a=!0,i=!1,o=void 0;try{for(var r,c=e[Symbol.iterator]();!(a=(r=c.next()).done);a=!0){var l=r.value;if(l.score>=D.minConfidence){var u=l.position,s=u.y,f=u.x;bt(t,s*D.canvasScale,f*D.canvasScale,D.pointRadius,n)}}}catch(p){i=!0,o=p}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}}(e,t,n)}function bt(e,t,n,a,i){e.beginPath(),e.arc(n,t,a,0,2*Math.PI),e.fillStyle=i,e.fill()}var yt=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(E.a)(t).call(this,e))).canvasRef=void 0,n.keypoints=[],n.state={canvas:HTMLCanvasElement},n.canvasRef=r.a.createRef(),n.getStream=n.getStream.bind(Object(g.a)(n)),n}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(){this.props.selection&&(this.keypoints=this.props.selection.info.keypoints),this.getStream()}},{key:"shouldComponentUpdate",value:function(e,t){return e.selection!==t.selection||e.videoIndex!==t.videoIndex}},{key:"getStream",value:function(){var e=this.props.video,t=this.keypoints,n=this.props.detections;e&&this.handleDrawing(e,n,t)}},{key:"render",value:function(){return r.a.createElement("div",{"data-tip":!0,"data-for":ht[this.props.helpWith]},r.a.createElement("label",null,this.props.name),r.a.createElement("br",null),r.a.createElement("canvas",{id:"canvas",ref:this.canvasRef}))}},{key:"handleDrawing",value:function(e,t,n){if(this.canvasRef.current){var a=this.canvasRef.current;a.height=e.height,a.width=e.width;var i=a.getContext("2d");i&&i.clearRect(0,0,a.width,a.height),this.drawVideo(i,e,a),this.drawPoses(t,i,n)}}},{key:"drawPoses",value:function(e,t,n){this.props.selection&&e&&t&&(e.map(function(e){return e.info.keypoints}).filter(function(e){return e!==n&&(t=n,e.every(function(e,n){return e.position.x!==t[n].position.x&&e.position.y!==t[n].position.y}));var t}).forEach(function(e){Ot(e,t,N)}),Ot(n,t,I))}},{key:"drawVideo",value:function(e,t,n){e&&e.drawImage(t,0,0,n.width,n.height)}}]),t}(r.a.Component);var St=Object(u.b)(function(e){return{video:ke(e),selection:_e(e),detections:We(e)}})(yt),Ct=n(556),Tt=n(565),wt=n(561),It=n(53),Nt=(n(352),r.a.memo(function(e){var t=Object(o.useState)(e.showModal),n=Object(B.a)(t,2),a=n[0],i=n[1];return Object(o.useEffect)(function(){i(e.showModal)},[i,e.showModal]),r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(It.a,{open:!0,modal:!0,closeOnDocumentClick:!1,closeOnEscape:!1},r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Warning!"),e.warning,r.a.createElement("br",null),r.a.createElement(O.a,{variant:"contained",className:"accept",color:"primary",onClick:e.accept},"Proceed"),r.a.createElement(O.a,{variant:"contained",className:"decline",onClick:e.decline},"Cancel"))))})),xt=r.a.memo(function(e){var t=Object(o.useState)(!1),n=Object(B.a)(t,2),a=n[0],i=n[1];function c(t,n){e.warning&&!e.checked?i(!0):(i(!1),e.onInputChange(Object(Q.a)({},e.configName,n)))}function l(){i(!1),e.onInputChange(Object(Q.a)({},e.configName,!0))}function u(){i(!1)}function s(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ct.a,null,r.a.createElement(Tt.a,{value:"start",onChange:c,control:r.a.createElement(wt.a,{checked:e.checked,color:"primary"}),label:e.name,labelPlacement:"start"})),e.warning&&r.a.createElement(Nt,{configName:e.configName,onInputChange:e.onInputChange,showModal:a,warning:e.warning,accept:l,decline:u}))}return r.a.createElement(r.a.Fragment,null,e.helpWith?r.a.createElement("div",{className:"checkbox","data-tip":!0,"data-for":ht[e.helpWith]},s()):r.a.createElement("div",{className:"checkbox"}," ",s()," "))},function(e,t){return e.checked===t.checked}),Mt=n(564),At=n(559),Dt=r.a.memo(function(e){return r.a.createElement("div",{"data-tip":!0,"data-for":ht[e.helpWith]},r.a.createElement("label",null,e.name),r.a.createElement(Ct.a,{className:"selectForm"},r.a.createElement(At.a,{value:e.defaultValue,onChange:function(t){e.onInputChange(Object(Q.a)({},e.configName,t.target.value))},name:e.name},e.values.map(function(e,t){return r.a.createElement(Mt.a,{key:t,value:e},e)}))))},function(e,t){return e.defaultValue===t.defaultValue&&e.values.length===t.values.length&&e.values.every(function(e,n){return e===t.values[n]})}),jt=n(560),Rt=r.a.memo(function(e){var t=Object(o.useState)(!0),n=Object(B.a)(t,2),a=n[0],i=n[1],c=Object(o.useState)(e.defaultValue),l=Object(B.a)(c,2),u=l[0],s=l[1],f=Object(o.useState)(e.defaultValue),p=Object(B.a)(f,2),h=p[0],d=p[1];return Object(o.useEffect)(function(){s(e.defaultValue)},[e.defaultValue,s]),r.a.createElement("div",{"data-tip":!0,"data-for":ht[e.helpWith]},r.a.createElement("label",null,e.name),r.a.createElement(jt.a,{className:"textFieldInput",id:"standard-number",value:u||0,onChange:function(t){var n=Number(t.target.value);s(n);var a=(!e.noDecimals||Number.isInteger(n))&&!isNaN(n)&&(!e.min||n>=e.min)&&(!e.max||n<=e.max);i(a),a&&(d(n),e.onValidInput(Object(Q.a)({},e.configName,n)))},onBlur:function(){s(h),i(!0)},type:"number",error:!a,margin:"normal"}))},function(e,t){return e.name===t.name&&e.defaultValue===t.defaultValue}),Pt=n(566),kt=n(563);function Lt(e){var t=e.children,n=e.open,a=e.value,i=r.a.useRef(null);return r.a.useEffect(function(){i.current&&i.current.update()}),r.a.createElement(Pt.a,{PopperProps:{popperRef:i},open:n,enterTouchDelay:0,placement:"top",title:a},t)}var Ht=r.a.memo(function(e){return r.a.createElement("div",{"data-tip":!0,"data-for":ht[e.helpWith]},r.a.createElement("label",null,e.name),r.a.createElement(kt.a,{ValueLabelComponent:Lt,"aria-label":"custom thumb label",defaultValue:e.defaultValue,value:e.defaultValue,onChange:function(t,n){e.onValidInput(Object(Q.a)({},e.configName,n))},min:e.min,max:e.max,step:e.step,className:"slider"}))},function(e,t){return e.name===t.name&&e.defaultValue===t.defaultValue});function Wt(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(xt,{name:"Show Reflection",configName:"toggleReflection",helpWith:ht.REFLECTION,checked:e.advancedConfig.toggleReflection,onInputChange:e.updateAdvancedConfig}),e.advancedConfig.toggleReflection&&r.a.createElement(Ht,{name:"Reflection Opacity",configName:"reflectionOpacity",step:.05,defaultValue:e.advancedConfig.reflectionOpacity,onValidInput:e.updateAdvancedConfig,helpWith:ht.REFLECTION_OPACITY,min:0,max:1}),r.a.createElement(xt,{name:"Toggle Camera Feed",configName:"toggleDebug",helpWith:ht.DEBUG,checked:e.advancedConfig.toggleDebug,onInputChange:e.updateAdvancedConfig}),e.advancedConfig.toggleDebug&&r.a.createElement(St,{name:"Camera",helpWith:ht.VIDEO_STREAM,videoIndex:0}),r.a.createElement("br",null),r.a.createElement("h3",null,"Model Settings"),r.a.createElement(Dt,{name:"Pose Model",configName:"architecture",onInputChange:e.updateModelConfig,values:["MobileNetV1","ResNet50"],defaultValue:e.advancedConfig.modelConfig.architecture,helpWith:ht.ARCHITECTURE}),r.a.createElement(Dt,{name:"Output Stride",configName:"outputStride",onInputChange:e.updateModelConfig,values:"MobileNetV1"===e.advancedConfig.modelConfig.architecture?["8","16"]:["16","32"],defaultValue:e.advancedConfig.modelConfig.outputStride.toString(),helpWith:ht.OUTPUT_STRIDE}),r.a.createElement(Dt,{name:"Resolution",configName:"inputResolution",onInputChange:e.updateModelConfig,values:["161","193","257","289","321","353","385","417","449","481","513","801"],defaultValue:e.advancedConfig.modelConfig.inputResolution.toString(),helpWith:ht.RESOLUTION}),"MobileNetV1"===e.advancedConfig.modelConfig.architecture&&r.a.createElement(Dt,{name:"Multiplier",configName:"multiplier",onInputChange:e.updateModelConfig,values:["0.5","0.75","1"],defaultValue:e.advancedConfig.modelConfig.multiplier.toString(),helpWith:ht.MULTIPLIER}),r.a.createElement("br",null),r.a.createElement("h3",null,"Detection Settings"),r.a.createElement(Rt,{name:"Detections",configName:"maxDetections",noDecimals:!0,step:1,defaultValue:e.advancedConfig.detectionConfig.maxDetections,onValidInput:e.updateDetectionConfig,helpWith:ht.DETECTIONS,min:1}),r.a.createElement(Ht,{name:"Minimum Confidence",configName:"scoreThreshold",helpWith:ht.MIN_SCORE,step:.01,defaultValue:e.advancedConfig.detectionConfig.scoreThreshold,onValidInput:e.updateDetectionConfig,min:0,max:1}),r.a.createElement(Rt,{name:"NMS Radius",configName:"nmsRadius",helpWith:ht.NMS_RADIUS,step:1,defaultValue:e.advancedConfig.detectionConfig.nmsRadius,onValidInput:e.updateDetectionConfig,min:1}))}n(353);var _t=n(233),Vt=function(e){return r.a.createElement(It.a,{className:"colorPicker",open:e.showPopup,modal:!0,closeOnDocumentClick:!1},r.a.createElement(r.a.Fragment,null,r.a.createElement(_t.SketchPicker,{color:e.color,onChangeComplete:function(t){e.onInputChange(Object(Q.a)({},e.configName,t.hex))},disableAlpha:!0}),r.a.createElement("br",null),r.a.createElement(O.a,{className:"closeColorPicker",variant:"contained",onClick:e.close},"Close")))},Ut=(n(515),r.a.memo(function(e){return r.a.createElement("div",{"data-tip":!0,"data-for":ht[e.helpWith]},r.a.createElement(O.a,{style:{backgroundColor:e.color,color:e.color?function(){var t=Ie.a.hex.rgb(e.color),n=Object(B.a)(t,3);return(n[0]+n[1]+n[2])/3>127?"black":"white"}():"white"},value:e.color,variant:"contained",onClick:e.onClick,className:"launchColorPicker"},"Pick ",e.name))},function(e,t){return e.color===t.color}));function Ft(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{name:"Frames Processed Per Second",configName:"fps",step:1,defaultValue:e.appConfig.fps,onValidInput:e.updateAppConfig,helpWith:ht.FPS,min:1}),r.a.createElement(Ht,{name:"X Sensitivity",configName:"xSensitivity",step:.05,defaultValue:e.appConfig.xSensitivity,onValidInput:e.updateAppConfig,helpWith:ht.X_SENSITIVITY,min:0,max:1}),r.a.createElement(Ht,{name:"Y Sensitivity",configName:"ySensitivity",step:.05,defaultValue:e.appConfig.ySensitivity,onValidInput:e.updateAppConfig,helpWith:ht.Y_SENSITIVITY,min:0,max:1}),r.a.createElement("br",null),r.a.createElement(Ut,{name:"Iris Colour",configName:"irisColor",onClick:e.colorPopupOnClick,color:e.appConfig.irisColor,helpWith:ht.IRIS_COLOR}),r.a.createElement("br",null),r.a.createElement(xt,{name:"Show Advanced Settings",configName:"toggleAdvanced",checked:e.appConfig.toggleAdvanced,onInputChange:e.updateAppConfig,warning:r.a.createElement(r.a.Fragment,null,"The advanced settings are intended for users with a technical understanding of the app and changing them from the defaults could lead to the app becoming unstable.")}))}var Gt=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(E.a)(t).call(this,e))).hideTimeout=0,n.state={leftPosition:"0px",isUnderMouse:!1,showColorPopup:!1},n.onMouseEnter=n.onMouseEnter.bind(Object(g.a)(n)),n.onMouseLeave=n.onMouseLeave.bind(Object(g.a)(n)),n.mouseMoveHandler=n.mouseMoveHandler.bind(Object(g.a)(n)),n.toggleShowColorPopup=n.toggleShowColorPopup.bind(Object(g.a)(n)),n.props.window.addEventListener("mousemove",n.mouseMoveHandler),n}return Object(v.a)(t,e),Object(d.a)(t,[{key:"mouseMoveHandler",value:function(){var e=this;this.setState({leftPosition:"0px"}),this.props.window.document.body.style.cursor="default",this.props.window.clearInterval(this.hideTimeout),this.state.isUnderMouse||this.props.advancedConfig.toggleDebug&&this.props.appConfig.toggleAdvanced||(this.hideTimeout=this.props.window.setTimeout(function(){e.setState({leftPosition:_}),e.props.window.document.body.style.cursor="none"},H))}},{key:"onMouseEnter",value:function(){this.props.window.clearInterval(this.hideTimeout),this.setState({isUnderMouse:!0})}},{key:"onMouseLeave",value:function(){this.setState({isUnderMouse:!1})}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.showColorPopup!==t.showColorPopup||t.leftPosition!==this.state.leftPosition||!y()(e,this.props)}},{key:"componentWillUnmount",value:function(){this.props.window.clearInterval(this.hideTimeout),this.props.window.removeEventListener("mousemove",this.mouseMoveHandler)}},{key:"toggleShowColorPopup",value:function(){this.setState({showColorPopup:!this.state.showColorPopup})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{left:this.state.leftPosition,width:W},className:"ConfigMenu",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},r.a.createElement("h1",null,"Settings"),r.a.createElement(O.a,{variant:"contained",className:"icon",onClick:function(){e.props.updateAppConfig({showHelp:!0})}},"Help"),r.a.createElement(Ft,Object.assign({},this.props,{colorPopupOnClick:this.toggleShowColorPopup})),this.props.appConfig.toggleAdvanced&&r.a.createElement(Wt,this.props),r.a.createElement("br",null),r.a.createElement(O.a,{variant:"contained",className:"reset",onClick:this.props.resetConfig},"RESET TO DEFAULTS"),r.a.createElement("br",null),r.a.createElement("br",null)),Object.values(ht).map(function(t,n){return(e.props.appConfig.toggleAdvanced||Et.includes(t))&&r.a.createElement(vt,{key:n,problemWith:ht[t]})}),this.state.showColorPopup&&r.a.createElement(Vt,{showPopup:this.state.showColorPopup,color:this.props.appConfig.irisColor,configName:"irisColor",close:this.toggleShowColorPopup,onInputChange:this.props.updateAppConfig}))}}]),t}(r.a.Component),Yt=Object(u.b)(function(e){return{appConfig:be(e),advancedConfig:ye(e)}},function(e,t){return{updateAppConfig:function(n){return e(st(it.APP,n,t.window))},updateAdvancedConfig:function(n){return e(st(it.ADVANCED,n,t.window))},updateModelConfig:function(n){return e(st(it.MODEL,n,t.window))},updateDetectionConfig:function(n){return e(st(it.DETECTION,n,t.window))},resetConfig:function(){return e({type:it.RESET})}}})(Gt);n(516);var Bt,qt=Object(u.b)(function(e){return{showHelp:Ce(e)}},function(e,t){return{setShowHelpToFalse:function(){return e(st(it.APP,{showHelp:!1},t.window))}}})(function(e){return r.a.createElement(It.a,{open:e.showHelp,modal:!0,onClose:e.setShowHelpToFalse,closeOnDocumentClick:!1,closeOnEscape:!1},function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Looking At You"),"This is an app designed to track users using a webcam. The eyes will follow you around and react differently depending on what they see. Hover over any of the menu items for more information. Click the Help button to see this message again.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("a",{href:"https://blog.scottlogic.com/2019/08/19/LookingAtYou.html",target:"_blank",rel:"noopener noreferrer"},"Developed by interns at Scott Logic"),r.a.createElement("br",null),r.a.createElement(O.a,{variant:"contained",className:"accept",onClick:e},"Close"))})}),Xt=n(234),Kt={xSensitivity:.8,ySensitivity:.6,fps:5,irisColor:"#55acee",toggleAdvanced:!1,showHelp:!0},zt={advancedConfig:{toggleDebug:!1,modelConfig:{architecture:"MobileNetV1",outputStride:16,inputResolution:289,multiplier:.75},detectionConfig:{flipHorizontal:!1,maxDetections:4,scoreThreshold:.6,nmsRadius:20},toggleReflection:!0,reflectionOpacity:.2},appConfig:Kt},Qt=(Bt={},Object(Q.a)(Bt,it.APP,function(e,t){return Object(le.a)({},e,{appConfig:Object(le.a)({},e.appConfig,t.payload)})}),Object(Q.a)(Bt,it.ADVANCED,function(e,t){return Object(le.a)({},e,{advancedConfig:Object(le.a)({},e.advancedConfig,t.payload)})}),Object(Q.a)(Bt,it.MODEL,function(e,t){return Object(le.a)({},e,{advancedConfig:Object(le.a)({},e.advancedConfig,{modelConfig:Object(le.a)({},e.advancedConfig.modelConfig,t.payload)})})}),Object(Q.a)(Bt,it.DETECTION,function(e,t){return Object(le.a)({},e,{advancedConfig:Object(le.a)({},e.advancedConfig,{detectionConfig:Object(le.a)({},e.advancedConfig.detectionConfig,t.payload)})})}),Object(Q.a)(Bt,it.RESET,function(){return Object(le.a)({},zt,{appConfig:Object(le.a)({},zt.appConfig,{showHelp:!1})})}),Bt);var Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0;return Qt.hasOwnProperty(t.type)?Qt[t.type](e,t):e},Zt=n(108),$t=(n(145),r.a.memo(function(e){var t=e.bezier,n=L.sclera,a=n*e.openCoefficient;function i(i){var o="url(#shadow".concat(i?"Top":"Bottom",")"),c=i?-1:1,l=i?{right:e.cornerShape.rightTop,left:e.cornerShape.leftTop}:{right:e.cornerShape.rightBottom,left:e.cornerShape.leftBottom};return r.a.createElement("path",{style:e.transitionStyle,filter:o,d:"M -1 0 \n                    V ".concat(c,"\n                    H 1\n                    V 0\n                    H ").concat(n,"\n                    C ").concat(n-t.scaledXcontrolOffset*l.right,"\n                        ").concat(c*t.scaledYcontrolOffset,"\n                        ").concat(t.controlOffset,"\n                        ").concat(c*a,"\n                        0\n                        ").concat(c*a,"\n                    S ").concat(-n+t.scaledXcontrolOffset*l.left,"\n                        ").concat(c*t.scaledYcontrolOffset,"\n                        ").concat(-n,"\n                        0\n                    Z")})}return r.a.createElement(r.a.Fragment,null,i(!0),i(!1))})),en=n(70),tn=n.n(en),nn=r.a.memo(function(e){return r.a.createElement("g",e.groupProps,r.a.createElement("circle",{className:"iris",r:L.iris,fill:"url(#irisGradient)"}),r.a.createElement("path",{className:"irisStyling",d:e.innerPath,fill:tn()(e.animation.irisColor).darken(10).toHexString()}))});function an(e){var t=L.pupil;return r.a.createElement("circle",{className:"pupil",r:t,fill:e.useGradient?"url(#pupilGradient)":"black",style:e.transitionStyle,transform:"scale(".concat(e.animation.dilation,")")})}function on(e){var t=Object(o.useRef)(null);Object(o.useEffect)(function(){if(t&&e.reflection){var n=t.current;if(n){var a=n.getContext("2d");a&&a.putImageData(e.reflection,0,0)}}},[e.reflection]);var n=256;e.reflection&&(n=e.reflection.width);var a=2*L.pupil*.95/n;return e.animation.dilation&&(a*=e.animation.dilation),r.a.createElement("g",e.groupProps,r.a.createElement("foreignObject",{width:n,height:n,x:-n/2,y:-n/2,style:e.transitionStyle,transform:"scale(".concat(a,")")},e.reflection&&r.a.createElement("canvas",{ref:t,width:n,height:n})))}function rn(){var e=L.pupil,t=L.iris;return r.a.createElement("g",null,r.a.createElement("ellipse",{className:"innerShine",rx:.375*e,ry:.75*e,fill:"url(#shineGradient)",transform:"skewX(30) translate(".concat(e,",").concat(.5*-e,")")}),r.a.createElement("ellipse",{className:"outerShine",rx:.5*e,ry:e,fill:"url(#shineGradient)",transform:"skewX(30) translate(".concat(t,",").concat(.55*-t,")")}))}var cn=r.a.memo(function(){return r.a.createElement("circle",{className:"sclera",r:L.sclera,fill:"url(#scleraGradient)"})});function ln(e){var t=e.class===a.RIGHT?{leftTop:1.45,rightTop:.7,leftBottom:1.1,rightBottom:.5}:{leftTop:.7,rightTop:1.45,leftBottom:.5,rightBottom:1.1},n={transition:"d ".concat(e.animation.duration,"ms")},i={transition:"transform ".concat(e.animation.duration,"ms")},o={className:"inner",style:i,transform:"".concat(e.skewTransform," translate(").concat(e.animation.target.x,",").concat(e.animation.target.y,")")};return r.a.createElement("div",{className:e.class},r.a.createElement("svg",{className:"layer",viewBox:"-1, -1, 2, 2"},r.a.createElement(cn,null),r.a.createElement(nn,{transitionStyle:i,animation:e.animation,innerPath:e.innerPath,groupProps:o})),r.a.createElement("svg",{className:"layer",viewBox:"-1, -1, 2, 2"},r.a.createElement(on,{transitionStyle:i,groupProps:o,animation:e.animation,reflection:e.reflection})),r.a.createElement("svg",{className:"layer",viewBox:"-1, -1, 2, 2"},r.a.createElement("g",o,r.a.createElement(an,{animation:e.animation,transitionStyle:i,useGradient:void 0!==e.reflection}),r.a.createElement(rn,null)),r.a.createElement($t,Object.assign({},e,{transitionStyle:n,cornerShape:t}))))}n(517);var un=r.a.memo(function(e){var t=tn()(e.irisColor).darken(13).toHexString(),n=tn()(e.irisColor).brighten(30).toHexString();return r.a.createElement("svg",{className:"collapse"},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"lgrad",x1:"0%",y1:"50%",x2:"100%",y2:"50%"},r.a.createElement("stop",{offset:"35%",stopColor:e.irisColor}),r.a.createElement("stop",{offset:"70%",stopColor:n}),r.a.createElement("stop",{offset:"100%",stopColor:t})),r.a.createElement("radialGradient",{id:"scleraGradient",cx:"50%",cy:"50%"},r.a.createElement("stop",{offset:"0%",stopColor:"white"}),r.a.createElement("stop",{offset:"20%",stopColor:"#f7f7f7"}),r.a.createElement("stop",{offset:"40%",stopColor:"#ebebeb"}),r.a.createElement("stop",{offset:"60%",stopColor:"#e0e0e0"}),r.a.createElement("stop",{offset:"80%",stopColor:"#b3b3b3"}),r.a.createElement("stop",{offset:"100%",stopColor:"#333333"})),r.a.createElement("radialGradient",{id:"irisGradient",cx:"50%",cy:"50%",href:"#lgrad"}),r.a.createElement("radialGradient",{id:"shineGradient"},r.a.createElement("stop",{offset:"0%",stopColor:"white",stopOpacity:1}),r.a.createElement("stop",{offset:"20%",stopColor:"white",stopOpacity:.7}),r.a.createElement("stop",{offset:"40%",stopColor:"white",stopOpacity:.05})),r.a.createElement("radialGradient",{id:"pupilGradient"},r.a.createElement("stop",{offset:"0%",stopColor:"black",stopOpacity:1-e.reflectionOpacity}),r.a.createElement("stop",{offset:"75%",stopColor:"black",stopOpacity:1-.75*e.reflectionOpacity}),r.a.createElement("stop",{offset:"100%",stopColor:"black",stopOpacity:1}))))},function(e,t){return e.irisColor===t.irisColor&&e.reflectionOpacity===t.reflectionOpacity}),sn=r.a.memo(function(e){return r.a.createElement("svg",{className:"collapse"},r.a.createElement("defs",null,r.a.createElement("filter",{id:"shadowTop"},r.a.createElement("feDropShadow",{dx:"0",dy:.05*e.openCoefficient/S.OPEN,stdDeviation:.05*e.openCoefficient/S.OPEN,floodColor:"#000000",floodOpacity:.8})),r.a.createElement("filter",{id:"shadowBottom"},r.a.createElement("feDropShadow",{dx:"0",dy:-.0125*e.openCoefficient/S.OPEN,stdDeviation:.0375*e.openCoefficient/S.OPEN,floodColor:"#000000",floodOpacity:.8}))))},function(e,t){return e.openCoefficient===t.openCoefficient});function fn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Math.hypot(e.x,e.y),a=n>t?t/n:1;return{x:a*e.x,y:a*e.y}}function pn(e,t){var n=document.createElement("canvas").getContext("2d");if(!n)return new ImageData(t.width,t.height);var a=function(e,t){var n=.4*t.width,a=K(e.x,1,-1,t.width,0)-n/2;a=Math.min(a,t.width-n),a=Math.max(a,0);var i=K(e.y,1,-1,t.height,0)-n/2;return i=Math.min(i,t.height-n),i=Math.max(i,0),{sourceX:a,sourceY:i,sourceWidth:n,sourceHeight:n}}(e,t);n.scale(-1,1);var i=.4*t.width;n.drawImage(t,a.sourceX,a.sourceY,a.sourceWidth,a.sourceHeight,0,0,-i,i);var o=n.getImageData(0,0,i,i),r=function(e,t,n){for(var a=new Uint8ClampedArray(e.length),i=0;i<n;i++)for(var o=K(i,n),r=0;r<t;r++){var c=K(r,t),l=Math.hypot(c,o);if(0<=l&&l<=1){var u=Math.sqrt(1-Math.pow(l,2));u=(u=(l+(1-u))/2)*P.intensity+l*(1-P.intensity);var s=Math.atan2(o,c),f=u*Math.cos(s),p=u*Math.sin(s),h=Math.floor(K(f,1,-1,t,0)),d=Math.floor(K(p,1,-1,n,0)),m=d*t+h;if(m>=0&&m<t*n)for(var E=0;E<4;E++)a[4*Math.floor(i*t+r)+E]=e[4*m+E]}}return a}(o.data,i,i);return o.data.set(r),o}function hn(e){var t=Math.hypot(e.x,e.y);if(0===t)return"";var n=U+K(1-t,1,0,1-U,0),a=e.x/t,i=e.y/t,o=Math.pow(a,2),r=Math.pow(i,2),c=r*n+o,l=(1-n)*a*i;return"matrix(".concat(n*o+r,",").concat(l,",").concat(l,",").concat(c,",0,0)")}var dn=r.a.memo(function(e){var t=e.environment,n=e.updateAnimation,i=e.animation,c=Object(o.useRef)("");Object(o.useEffect)(function(){c.current=function(e,t){for(var n=.1*e,a=.9*e,i=2*Math.PI/t,o=-i/2,r="M ".concat(n*Math.cos(i*(t-1))," ").concat(n*Math.sin(i*(t-1))," "),c=0;c<t;c++){var l=i*c;r+="L ".concat(a*Math.cos(l+o)," ").concat(a*Math.sin(l+o)," "),r+="L ".concat(n*Math.cos(l)," ").concat(n*Math.sin(l)," ")}return r}(L.iris,100)},[]);var l=Object(o.useRef)(void 0),u=e.animationExists&&i[0].target?fn(i[0].target):fn({x:e.target.x*e.appConfig.xSensitivity,y:e.target.y*e.appConfig.ySensitivity*.7}),s=(L.sclera-L.iris*U)/U,f={x:-u.x*s,y:u.y*s},p=Object(le.a)({openCoefficient:e.isSleeping?S.CLOSED:e.openCoefficient,dilation:e.dilation,irisColor:e.appConfig.irisColor,duration:1e3/e.appConfig.fps},i[0],{target:f}),h=Object(o.useRef)(e.detected);return Object(o.useEffect)(function(){h.current=e.detected},[e.detected]),Object(o.useEffect)(function(){return e.isSleeping?function(e,t){var n=e.setInterval(function(){var e=A.peekFrequency/(1e3/T.peek);if(Math.random()<e){var n=Math.random();t(function(e,t){var n,i;return[{openCoefficient:(n={},Object(Q.a)(n,a.RIGHT,t?S.OPEN:S.CLOSED),Object(Q.a)(n,a.LEFT,e?S.OPEN:S.CLOSED),n),duration:T.peek},{duration:T.peek},{openCoefficient:(i={},Object(Q.a)(i,a.RIGHT,S.CLOSED),Object(Q.a)(i,a.LEFT,S.CLOSED),i),duration:T.peek}]}(n>.1,n<.9))}},T.peek);return function(){e.clearInterval(n),n=0}}(t,n):function(e,t,n){var a=e.setInterval(function(){var e=t.current?A.focusedFrequency:A.frequency,a=e/(1e3/T.blink);Math.random()<a&&n([{openCoefficient:S.CLOSED,duration:T.blink},{openCoefficient:S.OPEN,duration:T.blink}])},T.blink);return function(){e.clearInterval(a),a=0}}(t,h,n)},[e.isSleeping,t,n,h]),Object(o.useEffect)(function(){if(e.animationExists){var a=t.setTimeout(function(){var e=Object(Zt.a)(i);e.shift(),n(e)},i[0].duration);return function(){return t.clearTimeout(a)}}},[i,n,t,e.animationExists]),Object(o.useEffect)(function(){e.advancedConfig.toggleReflection&&e.image&&e.imageData?l.current=pn(e.target,e.image):l.current=void 0},[e.target,e.image,e.advancedConfig.toggleReflection,e.imageData]),Object(o.useEffect)(function(){var e=function(e){return function(e,t){var n=ce[e.key];n&&t(n())}(e,n)};return t.addEventListener("keyup",e),function(){return t.removeEventListener("keyup",e)}},[t,n]),r.a.createElement("div",{className:"container"},[a.RIGHT,a.LEFT].map(function(t,n){var a="number"===typeof p.openCoefficient?p.openCoefficient:p.openCoefficient[t],i=function(e){var t=.55228474983*L.sclera,n=t*e;return{controlOffset:t,scaledXcontrolOffset:t-n,scaledYcontrolOffset:n}}(a);return r.a.createElement(ln,Object.assign({},e,{class:t,key:n,animation:p,bezier:i,reflection:l.current,innerPath:c.current,skewTransform:hn(u),reflectionOpacity:e.advancedConfig.reflectionOpacity,openCoefficient:a}))}),r.a.createElement(un,{irisColor:p.irisColor,reflectionOpacity:e.advancedConfig.reflectionOpacity}),r.a.createElement(sn,{openCoefficient:e.openCoefficient}))},function(e,t){return y()(e.animation,t.animation)&&e.dilation===t.dilation&&e.openCoefficient===t.openCoefficient&&e.target.x===t.target.x&&e.target.y===t.target.y&&e.isSleeping===t.isSleeping});var mn=Object(u.b)(function(e){return{appConfig:be(e),advancedConfig:ye(e),target:Ve(e),image:ke(e),selection:_e(e),animation:Fe(e),animationExists:Ge(e),imageData:He(e)}},function(e){return{updateAnimation:function(t){return e(lt(t))}}},function(e,t,n){var a=Object(le.a)({},n,e,t);return a.appConfig=n.appConfig||e.appConfig,a.target=n.target||e.target,a})(dn);function En(e){var t=Object(o.useState)({x:0,y:0}),n=Object(B.a)(t,2),a=n[0],i=n[1];return Object(o.useEffect)(function(){var t=Object(Xt.throttle)(function(t){var n=-K(t.clientX,e.width)*Kt.xSensitivity,a=K(t.clientY,e.height)*Kt.ySensitivity;i({x:n,y:a})},Kt.fps);return e.environment.addEventListener("mousemove",t),e.environment.document.body.style.cursor="default",function(){e.environment.removeEventListener("mousemove",t)}},[e.environment,e.width,e.height]),r.a.createElement(mn,Object.assign({},e,{dilation:C.neutral,openCoefficient:S.OPEN,detected:!1,isSleeping:!1,target:a,appConfig:Kt}))}var gn={texts:[{phrase:"HELLO",frequency:1},{phrase:"TRY WAVING",frequency:1},{phrase:"I DON'T HAVE HANDS",frequency:.5},{phrase:"PLAY WITH ME",frequency:.7},{phrase:"DON'T LEAVE ME",frequency:.5},{phrase:"NOTHING TO SEE HERE",frequency:.6},{phrase:"I HAVE NO MOUTH AND I MUST SCREAM",frequency:.03},{phrase:"PUT YOUR HANDS UP IN THE AIR",frequency:.8},{phrase:"DAB FOR ME",frequency:.2},{phrase:"NEVER SHOULD'VE COME HERE",frequency:.15},{phrase:"LET ME GUESS, SOMEONE STOLE YOUR SWEET ROLL?",frequency:.05},{phrase:"I'M POWERED BY MATH.RANDOM",frequency:.25},{phrase:"DO A T-POSE",frequency:.35},{phrase:"I'M LOOKING AT YOU",frequency:.6},{phrase:"I SEE YOU",frequency:.4},{phrase:"HOW ARE YOU?",frequency:.4},{phrase:"HELP ME",frequency:.1},{phrase:"HELP!",frequency:.1},{phrase:"PLEASED TO MEET YOU",frequency:.4},{phrase:"WORKING HARD OR HARDLY WORKING?",frequency:.35},{phrase:"WHAT DAY IS IT?",frequency:.15},{phrase:"WHERE AM I?",frequency:.2},{phrase:"BRING ME A BISCUIT AND SEE WHAT WILL HAPPEN",frequency:.4},{phrase:"REMINDER: HAVE LUNCH",frequency:.1},{phrase:"YOU WOULDN'T READ THAT IN A BOOK, WOULD YOU?",frequency:.1},{phrase:"MAY THE FORCE BE WITH YOU",frequency:.05},{phrase:"EVERY MAN HAS EYES, NOT EVERY MAN REALLY SEES",frequency:.05},{phrase:"YOU'VE GOT A FRIEND IN ME",frequency:.05},{phrase:"DESPITE THE CONSTANT NEGATIVE PRESS COVFEFE",frequency:.2},{phrase:"MY DADS ARE THE BEST",frequency:.05},{phrase:"SENSATIONAL",frequency:.3},{phrase:"THIS IS MADNESS! THIS IS SANTHOSH!!",frequency:.1},{phrase:"TRY MEOWING",frequency:.25},{phrase:"LIFE MOVES PRETTY FAST. IF YOU DON'T STOP AND LOOK AROUND ONCE IN A WHILE, YOU COULD MISS IT",frequency:.1},{phrase:"IT'S NOT WHO I AM UNDERNEATH, BUT WHAT I DO THAT DEFINES ME",frequency:.1},{phrase:'YOU HAD ME AT "HELLO"',frequency:.05},{phrase:"WHEN YOU LOOK AT THE DARK SIDE, CAREFUL YOU MUST BE. FOR THE DARK SIDE LOOKS BACK",frequency:.1}],delay:13e3,textDuration:3e3},vn={delay:1e3,transitionTime:2500,fontSize:"5em",defaultTextLength:20},On=(n(518),r.a.memo(function(e){var t,n={opacity:e.show?1:0,transition:"opacity ".concat(vn.transitionTime,"ms"),transitionDelay:"".concat(vn.delay,"ms"),transitionTimingFunction:"ease"};return r.a.createElement("div",{className:"revealText",style:(t=e.text,t.length>vn.defaultTextLength?{fontSize:parseInt(vn.fontSize,10)*vn.defaultTextLength/t.length+"em"}:{fontSize:vn.fontSize})},r.a.createElement("span",{style:n},e.text))})),bn=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(E.a)(t).call(this,e))).movementInterval=void 0,n.sleepTimeout=void 0,n.textTimeout=void 0,n.dilationCoefficient=void 0,n.openCoefficient=void 0,n.hasMovedLeft=void 0,n.personDetected=void 0,n.state={showText:!1,text:"",isSleeping:!1},n.movementInterval=0,n.sleepTimeout=0,n.textTimeout=0,n.dilationCoefficient=C.neutral,n.openCoefficient=S.OPEN,n.hasMovedLeft=!1,n.personDetected=!1,n.animateEye=n.animateEye.bind(Object(g.a)(n)),n.sleep=n.sleep.bind(Object(g.a)(n)),n}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.movementInterval=this.props.environment.setInterval(this.animateEye,1e3/this.props.fps)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.height!==e.height||this.props.width!==e.width||this.state.isSleeping!==t.isSleeping||!this.props.animationExists&&(this.props.target!==e.target||this.props.selection!==e.selection)}},{key:"componentWillReceiveProps",value:function(e){e.animationExists&&this.textTimeout&&(this.props.environment.clearTimeout(this.textTimeout),this.textTimeout=0)}},{key:"animateEye",value:function(){this.checkSelection(),this.calculateBrightness()}},{key:"componentWillUnmount",value:function(){this.props.environment.clearInterval(this.movementInterval)}},{key:"calculateBrightness",value:function(){if(this.props.image){var e=function(e){if(!e)return 0;for(var t=e.data,n=0,a=0;a<t.length;a+=4)n+=t[a]+t[a+1]+t[a+2];var i=Math.floor(n/(e.width*e.height*3));return Math.min(i,M.maxBrightness)}(this.props.image);this.dilationCoefficient=K(M.maxBrightness-e,M.maxBrightness,0,M.dilationMultipler+M.dilationOffset,M.dilationOffset),this.openCoefficient=e>=M.maxBrightness?S.CLOSED:S.OPEN}}},{key:"checkSelection",value:function(){this.openCoefficient===S.SQUINT&&Math.random()<.1&&(this.openCoefficient=S.OPEN),this.props.selection?(this.setNewTarget(),this.startTextTimer()):(this.setNoTarget(),this.props.animationExists||this.state.isSleeping||Math.random()<.2&&(this.hasMovedLeft=!this.hasMovedLeft,this.props.updateAnimation(function(e){var t=K(Math.random(),1,0,1-x.sideBuffer,0),n=e?-t:t;return[{target:{x:n,y:0},duration:500},{target:{x:n,y:0},duration:K(Math.random(),1,0,2e3,0)},{target:{x:0,y:0},duration:500}]}(this.hasMovedLeft))))}},{key:"setNewTarget",value:function(){this.wake(),this.props.environment.clearTimeout(this.sleepTimeout),this.personDetected||(this.personDetected=!0,this.dilationCoefficient=C.dilated)}},{key:"setNoTarget",value:function(){this.personDetected&&(this.personDetected=!1,this.openCoefficient=S.SQUINT,this.sleepTimeout=this.props.environment.setTimeout(this.sleep,w)),this.props.environment.clearTimeout(this.textTimeout),this.textTimeout=0}},{key:"sleep",value:function(){this.setState({isSleeping:!0})}},{key:"wake",value:function(){this.setState({isSleeping:!1})}},{key:"startTextTimer",value:function(){var e=this;this.textTimeout>0||(this.textTimeout=this.props.environment.setTimeout(function(){for(var t=gn.texts.map(function(e){return e.frequency}).reduce(function(e,t){return e+t}),n=Math.random()*t,a=0;n>=0&&a<gn.texts.length-1;)n-=gn.texts[a].frequency,a++;var i=gn.texts[a-1].phrase;e.setState({showText:!0,text:i}),e.props.environment.setTimeout(function(){e.setState({showText:!1}),e.textTimeout=0},gn.textDuration)},gn.delay))}},{key:"render",value:function(){return r.a.createElement("div",{className:"movementHandler"},r.a.createElement(mn,Object.assign({dilation:this.dilationCoefficient,detected:this.personDetected,openCoefficient:this.openCoefficient,isSleeping:this.state.isSleeping},this.props)),r.a.createElement(On,{text:this.state.text,show:this.state.showText}))}}]),t}(r.a.Component),yn=Object(u.b)(function(e){return{fps:Se(e),selection:_e(e),target:Ve(e),image:He(e),animation:Fe(e),animationExists:Ge(e)}},function(e){return{updateAnimation:function(t){return e(lt(t))}}})(bn);function Sn(){return r.a.createElement(It.a,{open:!0,modal:!0,closeOnDocumentClick:!1,closeOnEscape:!1},function(e){return r.a.createElement(o.Fragment,null,r.a.createElement("h1",null,"Looking At You"),"This is an app designed to track users using a webcam. The eyes will follow you around and react differently depending on what they see. Basic webcamless functionality is available (try moving your mouse after you close this window!) but for the full experience, please connect a webcam.",r.a.createElement("br",null),r.a.createElement(O.a,{variant:"contained",className:"accept",color:"primary",onClick:e},"Close"))})}var Cn=Object(u.b)(function(e){return function(e){return e.videoStore.video}(e)},function(e){return{setVideo:function(t){return e(ze(t))}}})(function(e){return r.a.createElement("video",{className:"hidden",autoPlay:!0,height:e.height,width:e.width,ref:function(t){return function(t){t&&e.stream&&(t.srcObject=e.stream,e.setVideo(t))}(t)}})}),Tn=r.a.memo(function(e){var t=Object(le.a)({},e),n=t.mediaDevices,a=t.configureStream;return Object(o.useEffect)(function(){n&&(a(n),n.ondevicechange=function(){n&&a(n)})},[n,a]),r.a.createElement("div",{className:"webcam-feed"},e.webcamAvailable&&r.a.createElement(Cn,null))}),wn=Object(u.b)(function(e){return{webcamAvailable:Le(e)}},function(e){return{configureStream:function(t){return e(function(e){return function(){var t=Object(p.a)(f.a.mark(function t(n,a){var i,o;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qe(e);case 2:i=t.sent,o=a().videoStore.webcamAvailable,i?(n(Qe(i)),o||n(Je())):o&&n(Je());case 5:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}(t))}}})(Tn),In=n(110),Nn=n.n(In),xn=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(E.a)(t).call(this,e))).state={width:n.props.environment.innerWidth,height:n.props.environment.innerHeight},n.updateDimensions=n.updateDimensions.bind(Object(g.a)(n)),n.setDoShowPopup=n.setDoShowPopup.bind(Object(g.a)(n)),n}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.environment.addEventListener("resize",this.updateDimensions);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.props.webcamAvailable&&!this.props.model&&this.props.loadModel()}},{key:"componentWillUnmount",value:function(){this.props.environment.removeEventListener("resize",this.updateDimensions)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.webcamAvailable!==e.webcamAvailable||this.props.model!==e.model||this.state.height!==t.height||this.state.width!==t.width}},{key:"updateDimensions",value:function(){this.setState({height:this.props.environment.innerHeight,width:this.props.environment.innerWidth})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(wn,this.props),!this.props.webcamAvailable&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Sn,null),r.a.createElement(En,Object.assign({},this.state,this.props))),this.props.webcamAvailable&&!this.props.model&&r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"bounce1"},r.a.createElement("img",{src:Nn.a,alt:"eye"})),r.a.createElement("div",{className:"bounce2"},r.a.createElement("img",{src:Nn.a,alt:"eye"})),r.a.createElement("div",{className:"bounce3"},r.a.createElement("img",{src:Nn.a,alt:"eye"}))),this.props.webcamAvailable&&this.props.model&&r.a.createElement(r.a.Fragment,null,r.a.createElement(qt,{window:this.props.environment}),r.a.createElement(yn,Object.assign({},this.state,this.props)),r.a.createElement(Yt,{window:this.props.environment.window})))}},{key:"setDoShowPopup",value:function(){this.props.environment.localStorage.setItem("dontShowPopup","true")}}]),t}(r.a.Component),Mn=Object(u.b)(function(e){return{model:e.detectionStore.model,webcamAvailable:Le(e)}},function(e,t){return{loadModel:function(){return e(et(t.environment))}}})(xn);n(519),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var An,Dn=n(61),jn=n(149),Rn=n(235),Pn={model:null,detections:[],eyesOpenCoefficient:S.OPEN,detectionInterval:0,animation:[],animationCoolDown:!1,nextSelectionSwapTime:-1,history:[]},kn=(An={},Object(Q.a)(An,"SET_MODEL",function(e,t){return Object(le.a)({},e,{model:t.payload})}),Object(Q.a)(An,$e,function(e,t){return Object(le.a)({},e,{detectionInterval:t.payload})}),Object(Q.a)(An,"SET_DETECTIONS",function(e,t){var n=t.payload,a=Object(Zt.a)(e.history);e.history.length>=k.maxNum&&a.shift();return a.push({target:n.previousTarget,color:n.previousColor}),Object(le.a)({},e,{detections:n.detections,history:a})}),Object(Q.a)(An,"SET_OPEN",function(e,t){return Object(le.a)({},e,{eyesOpenCoefficient:t.payload})}),Object(Q.a)(An,"SET_ANIMATION",function(e,t){return Object(le.a)({},e,{animation:t.payload})}),Object(Q.a)(An,"SWAP_SELECTION",function(e,t){var n=t.payload;return Object(le.a)({},e,{history:Pn.history,detections:n.selection?[n.selection]:[],nextSelectionSwapTime:n.nextSelectionSwapTime})}),Object(Q.a)(An,"TOGGLE_ANIMATION_COOLDOWN",function(e,t){return Object(le.a)({},e,{animationCoolDown:!e.animationCoolDown})}),An);var Ln,Hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn,t=arguments.length>1?arguments[1]:void 0;return kn.hasOwnProperty(t.type)?kn[t.type](e,t):e},Wn={webcamAvailable:!1,video:{width:0,height:0,stream:void 0},image:{data:new Uint8ClampedArray(0),width:0,height:0}},_n=(Ln={},Object(Q.a)(Ln,Ke.IMAGE_DATA,function(e,t){return Object(le.a)({},e,{image:t.payload})}),Object(Q.a)(Ln,Ke.TOGGLE_WEBCAM,function(e,t){return Object(le.a)({},e,{webcamAvailable:!e.webcamAvailable})}),Object(Q.a)(Ln,Ke.VIDEO,function(e,t){return Object(le.a)({},e,{video:Object(le.a)({},e.video,{videoElement:t.payload})})}),Object(Q.a)(Ln,Ke.VIDEO_STREAM,function(e,t){return Object(le.a)({},e,{video:Object(le.a)({},t.payload)})}),Ln);var Vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn,t=arguments.length>1?arguments[1]:void 0;return _n.hasOwnProperty(t.type)?_n[t.type](e,t):e},Un=Object(Dn.c)({videoStore:Vn,configStore:Jt,detectionStore:Hn}),Fn=["configStore"],Gn=[Rn.a,Object(jn.save)({states:Fn})];var Yn=function(){return window},Bn=function(){var e,t=Object(jn.load)({states:Fn});if(t.hasOwnProperty("configStore")){var n=t.configStore;e=function e(t,n){if("object"!==typeof n)return!0;var a=Object.getOwnPropertyNames(n);return"object"!==typeof t?a.length>0:a.every(function(a){return t.hasOwnProperty(a)&&e(t[a],n[a])})}(n,zt)}else e=!1;return Object(Dn.d)(Un,e?t:void 0,Dn.a.apply(void 0,Gn))}();l.a.render(r.a.createElement(u.a,{store:Bn},r.a.createElement(Mn,{environment:Yn(),mediaDevices:Yn().navigator.mediaDevices})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[241,1,2]]]);
//# sourceMappingURL=main.243edbf5.chunk.js.map